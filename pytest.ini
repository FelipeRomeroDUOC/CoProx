[tool:pytest]
testpaths = ["tests"]
python_files = ["test_*.py"]
python_classes = ["Test*"]
python_functions = ["test_*"]

# Marcadores para diferentes tipos de tests
markers =
    unit: Tests unitarios rápidos con mocks
    integration: Tests con APIs y servicios reales
    e2e: Tests end-to-end completos
    slow: Tests que tardan más de 5 segundos
    requires_network: Tests que necesitan conexión a internet
    requires_tokens: Tests que necesitan tokens reales

# Configuración de asyncio
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# Configuración de cobertura y ejecución
addopts = 
    --strict-markers
    --strict-config
    --disable-warnings
    -ra
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-report=xml
    --cov-fail-under=85

# Filtros de warnings
filterwarnings =
    error
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Variables de entorno para testing
env =
    TESTING = true
    PYTEST_RUNNING = true